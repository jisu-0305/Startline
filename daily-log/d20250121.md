## 오늘 해야할 일
+ 실제 마라톤 사이트 신청 폼 정리
+ 주요 기능 테스트
+ 요구사항 정리

## 오늘 한 일
### 주요 마라톤 사이트 신청 폼 정리
![alt text](/source/마라톤_신청형식.png)
+ 개인참가신청 옵션
    + 종목, 기념품, 성명, 성별, 번호, 우편번호, 임급자명, 비밀번호

### ChromeDrvier와 Selenium Java를 이용한 신청 자동화
+ 로컬에 ChromeDriver 버전에 맞게 설치후 코드에 지정
+ Selenium 적용 flow
    1. WebDriver 초기화 및 설정, setProperty를 사용하여 ChromeDriver의 경로 지정
    2. ChromeOption 설정: 브라우저 최대화, 이미지 로드 비활성화 등의 설정
    3. driver.get(url)을 통해서 원하는 브라우저로 이동, 이후 작업 수행
    4. 주소의 경우 새로운 팝업창이 뜸, 따라서 driver의 switch to메서드를 통해 변경 및 작업 수행
    5. 주소 입력하는 부분은 IFrame으로 구현되어있음, 따라서 IFrame으로 변경하고 값 대입
    6. 다시 main창으로 switch to 하고 나머지 작업 진행

+ 주요 코드
```
import org.openqa.selenium.By;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;

import java.util.Set;

public class SeoulMarathonTest {
    public static String WEB_DRIVER_ID = "webdriver.chrome.driver";
    public static String WEB_DRIVER_PATH = "C:\\Temp\\ssafy\\etc\\chromedriver-win64\\chromedriver.exe";

    public static void main(String[] args) {
        System.setProperty(WEB_DRIVER_ID, WEB_DRIVER_PATH);

        // ChromeOptions 설정
        ChromeOptions options = new ChromeOptions();
        options.addArguments("--start-maximized"); // 브라우저 창 최대화
        options.addArguments("--blink-settings=imagesEnabled=false"); // 이미지 로드 비활성화
        WebDriver driver = new ChromeDriver(options);

        UserInfoDTO userInfo = new UserInfoDTO(
        );

        // 사용할 URL
        String requestUrl = "http://www.xn--js0b99nl8d01ed7b48jylb.kr/run/1100.asp?T=3&wgu=1";

        try {
            // 웹페이지로 이동
            driver.get(requestUrl);

            // 페이지 로딩 대기
            Thread.sleep(500);
//
            fillForm1(driver);

            //다음 페이지 로딩 대기
            Thread.sleep(500);

            fillForm2(driver, userInfo);

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            // 브라우저 종료
//            driver.quit();
        }
    }

    private static void fillForm1(WebDriver driver){
    }

    private static void fillForm2(WebDriver driver, UserInfoDTO userInfo) throws InterruptedException {

    }
}
```
+ 실제 자동화로 신청 및 조회 결과 페이지
    + ![alt text](/source/신청결과조회.png)

## 마치며
### 피드백
+ 마라톤 사이트마다 겹치는 폼도 있지만 다른 폼도있어서 구현에 있어 고민을 해봐야 할것 같음
+ 이후 결제 API까지 테스트 까지 진행했다면 완벽한 하루였을듯

### 느낀점
+ 생각했던것보다 폼이 많이 겹치지 않고 다양해서 몇개의 예시 및 실제 대회 등록자가 등록할 수 있는 기능을 만들어서 괜찮을 것 같다고 생각